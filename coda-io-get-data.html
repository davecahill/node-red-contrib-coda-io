<script type="text/javascript">
    RED.nodes.registerType('coda-io-get-data',
    {
        category: 'function',
        color: '#f6e9de',
        defaults: {
            // Not implementing a rigorous check, as invalid value will
            // result in a response with the default 500 rows
            limit: {value: "", validate:function(v) { return RED.validators.number(v) && (v >= 0); }},
            request_for: {value: "", default: "rows"},
            name: {value: ""}
        },
        inputs: 1,
        outputs: 1,
        icon: "icon.png",
        label: function() {
            return this.name||"Get data from coda";
        }
    });
</script>

<script type="text/x-red" data-template-name="coda-io-get-data">
    <div class="form-row">
        <label for="node-input-request_for"> What to get from the table</label>
        <select type="text" id="node-input-request_for">
            <option value="rows" selected="selected">Rows</option>
            <option value="columns">Columns</option>
            <option value="nothing">Nothing</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-limit"> Maximum number of records to return</label>
        <input type="text" id="node-input-limit" placeholder="Max 500">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="coda-io-get-data">
    <p>Gets a table information, columns or rows from a table.</p>
    <p>
        <ul>
            <li>Select 'Rows' to retrieve rows</li>
            <li>Select 'Columns' to retrieve a list of columns in a given table</li>
            <li>Select 'Nothing' to retrieve information on a document or table</li>
        </ul>
        The document and table information must be given in the preceding 'Connection settings' node.
    </p>
</script>
